<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
</script> <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>

<div class="ui-widget">
    <form method="post">
        {% csrf_token %}
        <h1>New Poll</h1>

        {{ form.question_text.errors }}
        {{ form.question_text.label_tag }}
        {{ form.question_text }} <br>
        {{ form.company.errors }}
        {{ form.company.label_tag }}
        {{ form.company }}
        <br> <br>
        {{ formset.management_form }}
        {% for form in formset %}
            {{ form.field_errors }}
            {{ form }} <br>
        {% endfor %}

        <br>
        <input type="submit" value="Submit">
    </form>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        var location_input=$('input[id="company"]');
        location_input.autocomplete({
          source: "api/get_company/",
          minLength: 2
        });
    });

    // keeps same width as box
    jQuery.ui.autocomplete.prototype._resizeMenu = function () {
        var ul = this.menu.element;
        ul.outerWidth(this.element.outerWidth());
    }
</script>
